body {
  --focus: #1712A2A0;
  --p0background: #FFEE0B;
  --p0creature: #000000;
  --p0outline0: #D2116AA0;
  --p1background: #000000;
  --p1creature: #FFEE0B;
  --p1outline: #8A2BE2A0;
  margin: 0;
  --hex-offset: -1;
  overscroll-behavior-y: contain;
  --hex-size: 95px;
  --tile-size: 70px;
}

body > svg {
  display: none;
}

.hive {
  display: inline-grid;
  grid-template-columns: max-content auto;
  height: 100vh;
  user-select: none;
  width: 100vw;
}

.players {
  border-radius: 0.1rem;
  display: inline-grid;
  grid-template-columns: max-content max-content;
}

.player {
  background-color: rgba(0, 0, 0, 0.7);
  border-right: 1px solid white;
  display: inline-flex;
  flex-direction: column;
  height: 100vh;
  transition: 1s ease-out;
  transition-property: width, border, padding;
}

.player.hiding {
  width: var(--tile-size);
}

.player.hide {
  border: 0;
  padding: 0;
  width: 0;
}

.player0 {
  --background: var(--p0background);
  --creature: var(--p0creature);
  --outline: var(--p0outline0);
}

.player1 {
  --background: var(--p1background);
  --creature: var(--p1creature);
  --outline: var(--p1outline);
}

.name:focus {
  text-decoration-color: var(--creature);
}

.player .name {
  color: white;
  font-size: 1.5em;
  font-weight: bold;
  height: 2em;
  justify-content: center;
  outline: none;
  padding: 2vh 0 0;
  text-align: center;
}

.player .name svg {
  fill: var(--background);
  height: 1.5em;
}

.player .name svg:hover {
  fill: var(--creature);
  height: 1.5em;
}

.player .tile {
  --focus: #1A1A1DCC;
  margin: .4vh;
}

.player .tiles {
  display: inline-grid;
  grid-auto-flow: row;
  grid-template-rows: max-content;
  overflow: hidden auto;
  padding: 1vh .5vw;
  transition: all 0.1s ease-in;
}

.player .tiles::-webkit-scrollbar {
  background-color: transparent;
  border-bottom: 1px inset #7318B133;
  height: 4px;
  width: 7px;
}

.player .tiles::-webkit-scrollbar-thumb {
  background-color: #FFFFFF30;
  border-radius: 2px;
  transition-duration: .5s;
  transition-property: background-color;
}

.player .tiles::-webkit-scrollbar-thumb:hover {
  background-color: #FFFFFF;
}

main {
  align-items: center;
  background: #1A1A1D;
  display: grid;
  overflow: auto;
}

[role='grid'] {
  --focus: #1712A290;
  border-radius: 0.05rem;
  display: flex;
  flex-direction: column;
  margin: 0 auto;
}

[role='row'] {
  display: inline-flex;
  flex-direction: row;
  margin: calc(var(--hex-size) * -0.1) 0;
  min-width: calc(2 * var(--hex-size));
}

[role='row']:nth-child(1) {
  margin-top: 0;
}

[role='row']:last-child {
  margin-bottom: 0;
}

.right > [role='row']:nth-child(even),
.left > [role='row']:nth-child(odd) {
  margin-left: calc(var(--hex-size) / 2);
}

[role='cell'], .tile, [role='none'] {
  align-items: center;
  display: inline-flex;
  fill: var(--background, #00000030);
  height: var(--width);
  justify-content: center;
  margin: 0;
  min-height: fit-content;
  min-width: fit-content;
  outline: none;
  position: relative;
  transition: fill 0.1s ease-in;
  width: var(--width);
}

[role='cell'] > *, .tile > * {
  position: absolute;
}

[role='cell'] > svg {
  pointer-events: none;
}

[role='none'] {
  background: transparent;
  margin: 0;
  width: var(--hex-size);
}

[role='none']:last-child {
  display: none;
}

[role='cell'] {
  --width: var(--hex-size);
  transition-duration: .4s;
  transition-property: transform, margin;
  transition-timing-function: ease-in;
}

[role='cell'].hide, [role='none'] {
  margin: 0 0;
  transform: scale(0);
}

[role='cell'] .tile {
  margin: 0;
}

[role='cell'] .tile:not([draggable='true']) {
  pointer-events: none;
}

[role='cell'].no-drop.active,
[role='cell'].no-drop:focus,
[role='cell'].no-drop:hover {
  --focus: transparent;
  fill: #5D001E;
  transition-duration: 0.1s;
}

[role='cell'].can-drop {
  fill: rgba(175, 210, 117, 0.2);
}

[role='cell'].can-drop.active,
[role='cell'].can-drop:hover,
[role='cell'].can-drop:focus {
  fill: #AFD275;
}

.tile {
  --width: var(--tile-size);
}

.tile .creature {
  fill: var(--creature);
  pointer-events: none;
}

[role='cell'].can-drop .tile:not(.selected),
[role='cell'].no-drop .tile:not(.selected) {
  opacity: 100%;
  pointer-events: none;
}

.tile[draggable='false'] {
  opacity: 30%;
}

.tile.selected {
  animation: selected 0.2s infinite;
  transform: rotate(-3deg);
}

.tile.selected:before,
[draggable='true']:not(.selected):hover:before,
[draggable='true']:not(.selected):focus:before {
  box-shadow: 0 -.9em 1em .4em var(--shadow), 0 .9em 1em .4em var(--shadow), 0 0 1em var(--shadow);
  content: ' ';
  display: block;
  height: 50%;
  left: 0;
  margin: 25% 5%;
  outline: none;
  position: absolute;
  top: 0;
  transition: box-shadow 0.2s ease-in;
  width: 90%;
  z-index: -1;
}

.tile.selected:before {
  --shadow: var(--outline);
}

[draggable='true']:not(.selected):hover:before,
[draggable='true']:not(.selected):focus:before {
  --shadow: var(--focus);
}

.beforeDrag:before {
  box-shadow: none !important;
  display: none !important;
}

@keyframes selected {
  0% {
    transform: rotate(-1deg);
  }
  50% {
    transform: rotate(1deg);
  }
}

.links {
  align-content: center;
  color: white;
  display: grid;
  grid-auto-flow: column;
  grid-template-columns: max-content;
  justify-content: center;
  position: fixed;
  right: 0;
  top: 0;
  width: fit-content;
}

.links a {
  color: white;
  fill: white;
  font-size: 40px;
  padding: 10px;
  text-decoration: none;
}

.links :hover {
  color: hotpink;
  fill: hotpink;
}

.links a:visited, .links a:active {
  color: white;
  text-decoration: none;
}

.links svg {
  width: 30px;
}

@media only screen and (max-width: 720px) {
  body {
    filter: brightness(1.1);
    height: 100vh;
    /*noinspection CssInvalidPropertyValue*/
    max-height: -webkit-fill-available;
    margin: 0;
    --hex-size: 60px;
    --tile-size: 45px;
  }

  .hive {
    gap: 0;
    grid-template-columns: unset;
    grid-template-rows: max-content auto;
  }

  .players {
    grid-template-columns: unset;
    grid-template-rows: max-content max-content;
  }

  .player {
    border-right-width: 0;
    flex-direction: row;
    height: unset;
    width: 100vw;
    transition-property: height, border, padding;
  }

  .player.hiding {
    height: var(--tile-size);
    width: auto;
  }

  .player.hide {
    height: 0;
    width: auto;
  }

  .player .name {
    align-self: center;
    justify-content: center;
    margin: 0 2vw;
    width: 3em;
  }

  .player .tiles {
    border-left: 1px inset #7318B133;
    display: inline-grid;
    grid-auto-flow: column;
    overflow: auto hidden;
    padding: 1vh 3vw;
  }

  .player .tiles::-webkit-scrollbar-thumb {
    background-color: #FFFFFF;
    width: 3px;
  }

  main {
    overflow: auto;
  }

  [role='grid'] {
    border-radius: 0;
    padding: 5vh;
  }

  [role='cell'].can-drop {
    fill: #AFD275;
  }

  .tile.selected:before,
  [draggable='true']:not(.selected):hover:before,
  [draggable='true']:not(.selected):focus:before {
    box-shadow: 0 -7px 1em 5px var(--shadow), 0 7px 1em 5px var(--shadow);
  }

  .links {
    bottom: 0;
    top: unset;
  }
}

.modal {
  backdrop-filter: blur(5px);
  background-color: transparent;
  height: 100vh;
  left: 0;
  position: fixed;
  top: 0;
  width: 100vw;
}

.modal > div {
  align-content: center;
  display: inline-flex;
  flex-direction: column;
  height: max-content;
  left: 50%;
  padding: 1vmax 3vmax 0;
  position: fixed;
  top: 20%;
  transform: translateX(-50%);
  transition-duration: .5s;
  transition-property: height, width;
  width: max-content;
}

.modal > div > button:last-child {
  margin: 1rem;
}

.rules [role='grid'] {
  max-width: 98vmax;
  padding: 0;
}

.modal .menu {
  display: flex;
  justify-content: center;
  padding: 1vmax;
}

.modal.hide {
  transform: scale(0);
}

.share {
  background-color: rgb(249 235 208);
  border-radius: 5px;
}

.rules {
  --outline: #FFFF00AA;
  background-color: rgb(249 235 208);
  border-radius: 5px;
  --hex-size: 56px;
  --tile-size: 48px;
}

.rules [role='row'] {
  pointer-events: none;
  user-select: none;
  z-index: unset;
}

.rules .correct {
  --result: #1CCB1C
}

.rules .incorrect {
  --result: red;
}

.rules [role='cell'] > svg:first-child {
  fill: var(--result);
}

.rules [role='cell'] {
  fill: white;
}

.rules .start {
  z-index: 1;
}

.rules [role='cell'] span {
  color: var(--result);
  font-size: 1em;
}

.rules .tile.creature > span {
  background-color: black;
  clip-path: circle(40%);
  opacity: 75%;
  text-align: center;
  width: 1.2em;
}

.rules [role='cell'] {
  fill: black;
  z-index: unset;
}

.rules .creature.beetle {
  --fill: #6726E3;
}

.rules .creature.queen {
  --fill: orange;
}

.rules .creature.grasshopper {
  --fill: #00D000;
}

.rules .creature.spider {
  --fill: #FF0000;
}

.rules .creature.ant {
  --fill: cyan;
}

.rules .creature {
  --outline: var(--fill);
  fill: var(--fill);
}

.rules .tile {
  fill: black;
  z-index: unset;
}

.rules .tile:not(.creature) svg use:only-child {
  fill: white;
}

.rules .arrow {
  --span: 1;
  fill: var(--result);
  stroke-width: 1px;
  transform: rotate(var(--arrow-deg)) translateY(calc(var(--hex-size) / -3)) scale(1, calc(var(--span) * .95));
  transform-origin: center center;
}

.arrow.left {
  --arrow-deg: -90deg
}

.arrow.right {
  --arrow-deg: 90deg
}

.arrow.bottomLeft {
  --arrow-deg: -148deg
}

.arrow.topRight {
  --arrow-deg: 30deg
}

.arrow.topLeft {
  --arrow-deg: -30deg
}

.arrow.bottomRight {
  --arrow-deg: 148deg
}
